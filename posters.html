<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Conference Abstracts & Posters</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family: Arial, sans-serif;
  background:#f6f8fb;
  margin:0;
}

h1{text-align:center;margin:20px 0;}

.container{
  display:flex;
  gap:40px;
  padding:20px 5%;
  align-items:flex-start;
}

.column{
  flex:1;
}

.carousel{
  position:relative;
  overflow:hidden;
  background:#eef2f8;
  border-radius:16px;
  padding:5%;
  box-shadow:0 10px 30px rgba(0,0,0,0.08);
}

.track{
  display:flex;
  transition:transform .4s ease;
}

.slide{
  min-width:100%;
  display:flex;
  justify-content:center;
}

.slide img{
  max-width:90%;
  max-height:70vh;
  cursor:pointer;
  border-radius:8px;
  box-shadow:0 6px 16px rgba(0,0,0,.15);
}

.nav{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  background:#fff;
  border:none;
  font-size:24px;
  padding:8px 14px;
  cursor:pointer;
  border-radius:50%;
  box-shadow:0 2px 6px rgba(0,0,0,.2);
}
.left{left:10px;}
.right{right:10px;}

#viewer{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  justify-content:center;
  align-items:center;
  z-index:99;
}
#viewer iframe{
  width:80%;
  height:90%;
  background:#fff;
}
#viewer span{
  position:absolute;
  top:20px;
  right:30px;
  color:white;
  font-size:30px;
  cursor:pointer;
}
</style>
</head>

<body>

<h1>Conference Abstracts & Posters</h1>

<div class="container">

  <!-- ABSTRACTS -->
  <div class="column">
    <h2>Abstracts</h2>
    <div class="carousel">
      <button class="nav left" onclick="move(-1)">‹</button>
      <div class="track" id="abstractTrack"></div>
      <button class="nav right" onclick="move(1)">›</button>
    </div>
  </div>

  <!-- POSTERS -->
  <div class="column">
    <h2>Posters</h2>
    <div class="carousel">
      <div class="track" id="postTrack"></div>
    </div>
  </div>

</div>

<!-- PDF Viewer -->
<div id="viewer">
  <span onclick="viewer.style.display='none'">✕</span>
  <iframe id="frame"></iframe>
</div>

<script>
let i = 0;

function move(d){
  const a = document.querySelectorAll('#abstractTrack .slide');
  i = (i + d + a.length) % a.length;
  document.getElementById('abstractTrack').style.transform =
    `translateX(${-i*100}%)`;
  document.getElementById('postTrack').style.transform =
    `translateX(${-i*100}%)`;
}

fetch('/data/data.json').then(r=>r.json()).then(data=>{

  // Posters (order MUST match abstracts)
  data.posters.forEach(p=>{
    const s=document.createElement('div');
    s.className='slide';
    s.innerHTML=`<img src="${p.image}">`;
    s.onclick=()=>{
      if(p.pdf){
        frame.src=p.pdf;
        viewer.style.display='flex';
      }
    };
    postTrack.appendChild(s);
  });

  // Abstracts
  const abs=[
    "abstract1","abstract2","abstract3","abstract4","abstract5",
    "abstract6","abstract7","abstract8","abstract9","abstract10","abstract11"
  ];

  abs.forEach(a=>{
    const s=document.createElement('div');
    s.className='slide';
    s.innerHTML=`<img src="/abstracts/${a}.png">`;
    s.onclick=()=>{
      frame.src=`/abstracts/${a}.pdf`;
      viewer.style.display='flex';
    };
    abstractTrack.appendChild(s);
  });

});
</script>

</body>
</html>
