<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Posters & Abstracts</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial;background:#f4f7fb;margin:0;padding:40px}
h1{text-align:center;color:#062f6a;margin-bottom:30px}

.section{margin-bottom:60px}

.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}
.card{
  background:#fff;border-radius:12px;
  box-shadow:0 8px 16px rgba(0,0,0,.08);
  padding:14px;cursor:pointer
}
.card img{width:100%;height:300px;object-fit:contain}
.card h3{margin:8px 0 2px;font-size:1em}
.card small{color:#777}

/* Carousel */
.carousel{
  position:relative;overflow:hidden;border-radius:12px;
  background:#e6ebf3;height:520px
}
.track{display:flex;transition:transform .4s ease}
.slide{
  min-width:100%;height:520px;
  display:flex;align-items:center;justify-content:center
}
.slide img{
  max-width:90%;max-height:90%;
  object-fit:contain;cursor:pointer;
  box-shadow:0 10px 20px rgba(0,0,0,.15);
  border-radius:6px;background:#fff
}

.nav{
  position:absolute;top:50%;transform:translateY(-50%);
  background:rgba(0,0,0,.4);color:white;border:none;
  font-size:30px;padding:10px 16px;cursor:pointer;z-index:10
}
.prev{left:10px}.next{right:10px}

/* Viewer */
.viewer{
  position:fixed;inset:0;background:rgba(0,0,0,.7);
  display:none;align-items:center;justify-content:center;
}
.viewer iframe{width:80%;height:90%;border:none;background:white}
</style>
</head>

<body>

<h1>Conference Posters & Abstracts</h1>

<div class="section">
  <h2>Posters</h2>
  <div class="grid" id="posterGrid"></div>
</div>

<div class="section">
  <h2>Abstracts</h2>
  <div class="carousel">
    <button class="nav prev">&#10094;</button>
    <div class="track" id="abstractTrack"></div>
    <button class="nav next">&#10095;</button>
  </div>
</div>

<div class="viewer" id="viewer" onclick="this.style.display='none'">
  <iframe id="frame"></iframe>
</div>

<script>
let index=0;
const track=document.getElementById("abstractTrack");

function move(dir){
  const slides=document.querySelectorAll(".slide");
  index=(index+dir+slides.length)%slides.length;
  track.style.transform=`translateX(-${index*100}%)`;
}
document.querySelector(".next").onclick=()=>move(1);
document.querySelector(".prev").onclick=()=>move(-1);

fetch("/data/data.json").then(r=>r.json()).then(data=>{
  const grid=document.getElementById("posterGrid");

  data.posters.forEach(p=>{
    const div=document.createElement("div");
    div.className="card";
    div.innerHTML=`
      <img src="${p.image}">
      <h3>${p.title}</h3>
      <small>${p.year}</small>
    `;
    div.onclick=()=>{
      if(p.pdf){
        document.getElementById("frame").src=p.pdf;
        document.getElementById("viewer").style.display="flex";
      }
    };
    grid.appendChild(div);
  });

  /* Abstract carousel */
  const abstracts=[
    "abstract1","abstract2","abstract3","abstract4","abstract5",
    "abstract6","abstract7","abstract8","abstract9","abstract10","abstract11"
  ];

  abstracts.forEach(name=>{
    const s=document.createElement("div");
    s.className="slide";
    s.innerHTML=`
      <img src="/abstracts/${name}.png"
           onerror="this.src='/images/pdf-placeholder.png'"
           alt="${name}">
    `;
    s.onclick=()=>{
      document.getElementById("frame").src="/abstracts/"+name+".pdf";
      document.getElementById("viewer").style.display="flex";
    };
    track.appendChild(s);
  });
});
</script>

</body>
</html>
